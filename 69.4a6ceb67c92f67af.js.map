{"version":3,"mappings":"2OAeIA,sCAEEA,SAA+CA,0BAAcA,+BAC7DA,SAAmCA,yBAAaA,+BAChDA,SAAqCA,8BAAkBA,+BACvDA,SAAgCA,oBAAOA,SCf7C,MAAMC,EAAiB,CAAC,CAAEC,KAAM,GAAIC,UCOpC,MAAM,QASJC,YACUC,EACAC,EACAC,EACAC,GAHAC,mBACAA,sBACAA,UACAA,cAZgBA,eAAY,qEAEtCA,UAAOA,KAAKF,GAAGG,MAAM,CACnBC,SAAU,GACVC,SAAU,KAEZH,iBAAuD,KASvDI,WACEJ,KAAKJ,YAAYS,YAGnBC,SAASC,GACPP,KAAKQ,YAAc,iBAEnBR,KAAKH,eAAeY,OAAOF,GAAWG,UACpC,EAAGC,YACDX,KAAKQ,YAAc,KAEnBI,WAAW,KACTZ,KAAKJ,YAAYiB,SAASF,GAC1BX,KAAKD,OAAOe,cAAc,MACzB,MAEJC,IACCf,KAAKQ,YAAc,OAEnBI,WAAW,KACTZ,KAAKQ,YAAc,MAClB,qDArCEQ,GAAczB,wEAAdyB,EAAcC,uiBFZ3B1B,kBAMEA,mCAAY2B,WAASA,wBAErB3B,gBAA8BA,6BAAiBA,QAC/CA,mBAAiF,QAAjFA,CAAiF,YAAjFA,CAAiF,SAKjFA,oBACEA,qBACAA,kBACEA,iCACAA,iCACAA,iCACAA,kCACFA,mBAlBFA,sCAAsC,0BAAtCA,CAAsC,+BAFtCA,0BAaQA,2CACFA,uCACgBA,yCACHA,gDACAA,oCACAA,6oGEPRyB,GAAb,KDDO,IAAMG,EAAb,MAAM,sDAAOA,4DAHF,CAACC,cAAsB5B,IACtB4B,QAECD,GAAb,GEAaE,EAAb,MAAM,sDAAOA,4DAFF,CAACC,KAAcC,KAAqBJ,MAElCE,GAAb","names":["i0","routes","path","component","constructor","authService","accountService","fb","router","this","group","username","password","ngOnInit","removeAll","onSubmit","loginInfo","loginStatus","signIn","subscribe","token","setTimeout","setToken","navigateByUrl","err","LoginComponent","selectors","ctx","LoginRoutingModule","RouterModule","LoginModule","CommonModule","ReactiveFormsModule"],"sources":["./src/app/pages/login/login.component.html","./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.component.ts","./src/app/pages/login/login.module.ts"],"sourcesContent":["<form\n  [formGroup]=\"form\"\n  class=\"login shadow-lg\"\n  [class.loading]=\"loginStatus !== null\"\n  [class.ok]=\"loginStatus === 'ok'\"\n  [class.fail]=\"loginStatus === 'fail'\"\n  (ngSubmit)=\"onSubmit(form.getRawValue())\"\n>\n  <h1 class=\"title text-center\">Attendance System</h1>\n  <input type=\"text\" placeholder=\"Username\" formControlName=\"username\" autofocus />\n  <i class=\"fa fa-user\"></i>\n  <input type=\"password\" placeholder=\"Password\" formControlName=\"password\" />\n  <i class=\"fa fa-key\"></i>\n  <!-- <a href=\"javascript:void(0)\">Forgot your password?</a> -->\n  <button [disabled]=\"!!loginStatus\">\n    <i *ngIf=\"!!loginStatus\" class=\"spinner\"></i>\n    <span class=\"state\" [ngSwitch]=\"loginStatus\">\n      <ng-container *ngSwitchCase=\"'Authenticating'\">Authenticating</ng-container>\n      <ng-container *ngSwitchCase=\"'ok'\">Welcome Back!</ng-container>\n      <ng-container *ngSwitchCase=\"'fail'\">Please login again</ng-container>\n      <ng-container *ngSwitchDefault> Log in </ng-container>\n    </span>\n  </button>\n</form>\n<!-- <footer><a target=\"blank\" href=\"javascript:void(0)\">Concat Me</a></footer> -->\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginComponent } from './login.component';\n\nconst routes: Routes = [{ path: '', component: LoginComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","import { Component, HostBinding, OnInit } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '@attendance-system/core/auth';\r\nimport { LoginInfo } from '@attendance-system/data/models';\r\nimport { AccountService } from '@attendance-system/data/services';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  @HostBinding('className') className = 'd-flex flex-column justify-content-center align-items-center w-100';\r\n\r\n  form = this.fb.group({\r\n    username: [],\r\n    password: []\r\n  });\r\n  loginStatus: 'Authenticating' | 'ok' | 'fail' | null = null;\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private accountService: AccountService,\r\n    private fb: FormBuilder,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.authService.removeAll();\r\n  }\r\n\r\n  onSubmit(loginInfo: LoginInfo): void {\r\n    this.loginStatus = 'Authenticating';\r\n\r\n    this.accountService.signIn(loginInfo).subscribe(\r\n      ({ token }) => {\r\n        this.loginStatus = 'ok';\r\n\r\n        setTimeout(() => {\r\n          this.authService.setToken(token);\r\n          this.router.navigateByUrl('/');\r\n        }, 500);\r\n      },\r\n      (err) => {\r\n        this.loginStatus = 'fail';\r\n\r\n        setTimeout(() => {\r\n          this.loginStatus = null;\r\n        }, 500);\r\n      }\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LoginRoutingModule } from './login-routing.module';\nimport { LoginComponent } from './login.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [CommonModule, ReactiveFormsModule, LoginRoutingModule]\n})\nexport class LoginModule {}\n"],"sourceRoot":"webpack:///","file":"69.4a6ceb67c92f67af.js"}